<cftry>
	<cfadmin 
		action="updatePassword"
		type="server"
		newPassword="<%= node['railo']['server_password'] %>">
	<cfcatch></cfcatch>
</cftry>

<cftry>
	<cfadmin 
		action="updatePassword"
		type="web"
		newPassword="<%= node['railo']['web_password'] %>">
	<cfcatch></cfcatch>
</cftry>

<% node['railo']['datasources'].each do |dsnname, conf| %>
	<cftry>
		<cfadmin 
			action="updateDatasource"
			type="server"
			password="<%= node['railo']['server_password'] %>"

			dbusername="<%= conf.username %>"
			dbpassword="<%= conf.password %>"
			name="<%= dsnname %>"
			host="<%= conf.host %>"
			database="<%= conf.database %>"

			classname="org.gjt.mm.mysql.Driver"
			dsn="jdbc:mysql://{host}:{port}/{database}"
			port="3306"

			connectionLimit="-1"
			connectionTimeout="1"
			blob="true"
			clob="true"
			allowed_select="true"
			allowed_insert="true"
			allowed_update="true"
			allowed_delete="true"
			allowed_alter="true"
			allowed_drop="true"
			allowed_revoke="true"
			allowed_create="true"
			allowed_grant="true"
			custom="useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull&amp;tinyInt1isBit=false&amp;autoReconnect=true&amp;jdbcCompliantTruncation=false&amp;allowMultiQueries=false&amp;useOldAliasMetadataBehavior=true&amp;useLegacyDatetimeCode=true" 
			remoteClients="arrayOfClients">
		<cfcatch></cfcatch>
	</cftry>
<% end %>